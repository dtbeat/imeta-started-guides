<?xml version="1.0" encoding="utf-8"?>
<components xmlns="http://www.imeta.org/meta"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xsi:schemaLocation="http://www.imeta.org/meta http://www.imeta.org/meta/meta.xsd">
    <references>
        <reference file="java.xml"/>
        <reference file="base.xml"/>
        <reference file="customer.xml"/>
        <reference file="goods.xml"/>
    </references>
    <component name="order" moduleName="mall" title="订单组件" domain="order">
        <enum name="OrderStatus" title="单据状态" m1Type="Integer">
            <literal name="Paying" title="待支付" value="1" />
            <literal name="Conforming" title="已付款，待确认" value="2" />
            <literal name="Paid" title="已付款" value="3" />
            <literal name="Preparing" title="配货中" value="4" />
            <literal name="Prepared" title="配货完成，待发货" value="5" />
            <literal name="Shipping" title="已发货" value="6" />
            <literal name="Received" title="已收货" value="7" />
            <literal name="AutoComplete" title="已完成" value="8" />
            <literal name="Canceled" title="已取消" value="9" />
            <literal name="COD" title="货到付款" value="10" />
        </enum>
        <class name="Order" title="订单" tableName="mall_order">
            <properties>
                <property name="totalMoney" columnName="total_money" title="总金额" type="Decimal" precision="12" scale="2"/>
                <!--<property name="orderTime" columnName="order_time" title="下单时间" type="DateTime" isRequired="true"/>-->
                <property name="status" title="单据状态" type="OrderStatus" defaultValue="1" isRequired="true" />
                <property name="customer" columnName="customer_id" title="客户" type="cbo.customer.Customer" isRequired="true" />
            </properties>
        </class>
        <class name="OrderDetail" title="订单明细" tableName="mall_order_detail">
            <properties>
                <property name="order" columnName="order_id" title="订单" type="Order" isRequired="true"/>
                <property name="goodsCate" columnName="goods_cate_id" title="商品分类" type="cbo.goods.GoodsCate" isRequired="true" />
                <property name="goods" columnName="goods_id" title="商品" type="cbo.goods.Goods" isRequired="true" />
                <property name="sku" columnName="sku_id" title="SKU" type="cbo.goods.Sku" isRequired="true"/>
                <property name="qty" title="数量" type="Decimal" precision="12" scale="2"/>
                <property name="price" title="单价" type="Decimal" precision="12" scale="2"/>
            </properties>
        </class>
        <class name="OrderLogistics" title="订单物流" tableName="mall_order_logistics">
            <properties>
                <property name="order" columnName="order_id" title="订单" type="Order" isRequired="true"/>
                <property name="shipTime" columnName="ship_Time" title="发货时间" type="DateTime" isRequired="true"/>
                <property name="site" columnName="site" title="地点" type="String" length="100" isRequired="true"/>
            </properties>
        </class>
        <class name="OrderLogisticsAction" title="订单物流操作记录" tableName="mall_order_logistics_action">
            <properties>
                <property name="order" columnName="order_id" title="订单" type="Order" isRequired="true" isRedundant="true"/>
                <property name="logistics" columnName="logistics_id" title="订单物流" type="OrderLogistics" isRequired="true"/>
                <property name="action" title="操作记录" type="String" length="100" isRequired="true"/>
                <property name="user" title="负责人" type="String" length="50" isRequired="true"/>
            </properties>
        </class>
        <generalizations>
            <generalization parent="base.entity.Vouch" child="Order"/>
            <generalization parent="base.entity.BizObject" child="OrderDetail"/>
            <generalization parent="base.entity.BizObject" child="OrderLogistics"/>
            <generalization parent="base.entity.BizObject" child="OrderLogisticsAction"/>
        </generalizations>
        <aggregations>
            <aggregation type="composition" parentRole="order" aggrParent="Order" childRole="details" aggrChild="OrderDetail"
                         childRoleMulti="OneToMany"/>
            <aggregation type="composition" parentRole="order" aggrParent="Order" childRole="logistics" aggrChild="OrderLogistics"
                         childRoleMulti="ZeroToMany"/>
            <aggregation type="composition" parentRole="logistics" aggrParent="OrderLogistics" childRole="actions"
                         aggrChild="OrderLogisticsAction" childRoleMulti="ZeroToMany"/>
        </aggregations>
    </component>
</components>